from jinja2 import Environment

def ad_to_dict(array, key_field, value_field):
    """
    Custom Jinja2 filter to convert array output into a dictionary.
    array: List of dictionaries to convert.
    key_field: Field to use as the key in the dictionary.
    value_field: Field to use as the value in the dictionary.
    """
    return {item[key_field]: item[value_field] for item in array}

# Register the custom filter
env = Environment()
env.filters['ad_to_dict'] = ad_to_dict
